<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Order Details - Ventus</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-image: url('https://i.imgur.com/w2Ihyed.jpeg');
    background-size: cover;
    background-position: center;
    color: white;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  header {
    background: rgba(0, 0, 0, 0.6);
    padding: 20px;
    text-align: center;
    font-size: 2rem;
    font-weight: bold;
    box-shadow: 0 2px 6px rgba(0,0,0,0.5);
  }

  .container {
    flex: 1;
    padding: 30px;
    max-width: 700px;
    margin: 0 auto 40px;
    background: rgba(0, 0, 0, 0.65);
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.6);
  }

  h2 {
    text-align: center;
    margin-bottom: 30px;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.6);
  }

  label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
  }

  input, textarea {
    width: 100%;
    padding: 12px;
    border: none;
    border-radius: 6px;
    margin-bottom: 20px;
    font-size: 1rem;
  }

  input:focus, textarea:focus {
    outline: 2px solid #ffd700;
  }

  #map {
    height: 350px;
    border-radius: 12px;
    margin-bottom: 20px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.7);
  }

  .btn-submit {
    width: 100%;
    background: #ffd700;
    color: black;
    font-weight: bold;
    padding: 14px;
    border: none;
    border-radius: 8px;
    font-size: 1.1rem;
    cursor: pointer;
    transition: background 0.3s;
  }

  .btn-submit:hover {
    background: #fff34d;
  }

  footer {
    text-align: center;
    padding: 15px;
    background: rgba(0,0,0,0.6);
    font-size: 0.9rem;
    margin-top: auto;
  }

  .coords {
    display: flex;
    gap: 15px;
  }

  .coords input {
    flex: 1;
  }
</style>
</head>
<body>

<header>
  Order Details
</header>

<div class="container">
  <h2>Complete Your Order</h2>
  <form id="orderForm" onsubmit="return handleSubmit(event)">
    <label for="name">Full Name</label>
    <input type="text" id="name" name="name" required placeholder="Enter your full name" />

    <label for="email">Email Address</label>
    <input type="email" id="email" name="email" required placeholder="your@example.com" />

    <label for="phone">Phone Number</label>
    <input type="tel" id="phone" name="phone" required pattern="[0-9+ ]+" placeholder="+62 812 3456 7890" />

    <label for="address">Street Address</label>
    <textarea id="address" name="address" rows="3" required placeholder="Street name, building, block, etc."></textarea>

    <label>Pick Your Location on Map</label>
    <div id="map"></div>

    <div class="coords">
      <input type="text" id="lat" name="latitude" placeholder="Latitude" readonly />
      <input type="text" id="lng" name="longitude" placeholder="Longitude" readonly />
    </div>

    <label for="notes">Order Notes</label>
    <textarea id="notes" name="notes" rows="3" placeholder="Any additional instructions?"></textarea>

    <button type="submit" class="btn-submit">Submit Order</button>
  </form>
</div>

<footer>
  &copy; 2025 Ventus. All rights reserved.
</footer>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  // Initialize map centered in Indonesia
  const map = L.map('map').setView([-2.5489, 118.0149], 5);

  // Add OpenStreetMap tiles
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: 'Â© OpenStreetMap contributors'
  }).addTo(map);

  let marker;

  // On map click, add/move marker & update coords inputs
  map.on('click', function(e) {
    const { lat, lng } = e.latlng;
    if (marker) {
      marker.setLatLng(e.latlng);
    } else {
      marker = L.marker(e.latlng).addTo(map);
    }
    document.getElementById('lat').value = lat.toFixed(6);
    document.getElementById('lng').value = lng.toFixed(6);
  });

  // Handle form submit
  function handleSubmit(event) {
    event.preventDefault();
    const form = event.target;

    const data = {
      name: form.name.value.trim(),
      email: form.email.value.trim(),
      phone: form.phone.value.trim(),
      address: form.address.value.trim(),
      latitude: form.latitude.value,
      longitude: form.longitude.value,
      notes: form.notes.value.trim() || "None"
    };

    if (!data.latitude || !data.longitude) {
      alert("Please select your location on the map.");
      return false;
    }

    const summary = `
Full Name: ${data.name}
Email: ${data.email}
Phone: ${data.phone}
Street Address: ${data.address}
Latitude: ${data.latitude}
Longitude: ${data.longitude}
Notes: ${data.notes}
    `;

    alert("Your order has been successfully submitted!\n\n" + summary);

    form.reset();
    if(marker) {
      map.removeLayer(marker);
      marker = null;
    }
    document.getElementById('lat').value = '';
    document.getElementById('lng').value = '';
    return false;
  }
</script>

</body>
</html>
